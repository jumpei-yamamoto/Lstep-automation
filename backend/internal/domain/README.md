# internal/domain

ドメイン層 - ビジネスルールの中核

## 責務

- **エンティティ**: ビジネスアイデンティティを持つオブジェクト
- **値オブジェクト**: 不変な値を表現するオブジェクト
- **ドメインサービス**: エンティティや値オブジェクトに属さないビジネスロジック
- **リポジトリインターフェース**: データアクセスの抽象化（ポート）
- **ドメインエラー**: ビジネスルール違反を表現する例外

## 重要な原則

### 技術依存の禁止
- echo.Context、SQL、HTTP クライアント等の import は**絶対禁止**
- `time`、`errors`、`context` 等の標準ライブラリのみ利用可能
- 外部ライブラリは最小限に留める

### 不変条件（Invariant）の保護
- エンティティ内でビジネスルールを強制
- 集約ルートを通じてのみ内部状態の変更を許可
- 常に整合性のある状態を維持

### 純粋関数の推奨
- 副作用のない関数を基本とする
- テスタブルで予測可能なコードを記述

## ファイル構成例

```
domain/
├── user.go              # ユーザーエンティティ
├── user_repository.go   # ユーザーリポジトリインターフェース
├── email.go             # Email値オブジェクト
├── errors.go            # ドメインエラー定義
└── user_service.go      # ユーザードメインサービス
```

## 依存関係

- **依存する**: Go標準ライブラリのみ
- **依存される**: UseCase層、Interface層